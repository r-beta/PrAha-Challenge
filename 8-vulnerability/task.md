## 課題１（質問）

### 以下の脆弱性の仕組み、発生し得る被害、対処法を解説してください
- XSS
  - 仕組み  
  ユーザ投稿型のWEBサイトに悪意のあるスクリプトを埋め込み、そのサイトを訪れたユーザに対して攻撃する
  - 被害  
  Cookieに保存されている秘匿な情報を攻撃者に送信したり、攻撃者のサイトにリダイレクトさせ、ログイン情報を盗み取ったりする
  - 対策法  
  スクリプトをエスケープする処理を入れておく（<,>,",'の無効化など）  
  HTMLInnerを使用しない
  
- コマンドインジェクション
  - 仕組み  
  ユーザが入力した値を元にシェル上で処理が走る処理へ悪意のある値を入力し、OSを操る
  - 被害  
  サーバ乗っ取り、情報漏洩、データ改ざんなどなんでも・・・
  - 対策法  
  エスケープ処理を入れておく
  そもそもユーザが入力した値をOS側に持ち込まない

- SQLインジェクション
  - 仕組み  
  ユーザが入力した値を使ったクエリに対してクエリ自体を操作する目的の値を入れることでDBを操作する
  - 被害  
  DBに保管されているユーザの個人情報やログイン情報などが盗まれる  
  データを改ざんされ、不正な利益を得られてしまう
  - 対策法  
  エスケープ処理を入れておく  
  生のSQLを使用しない
  
- CSRF
  - 仕組み  
  攻撃用のサイトに第三者をアクセスさせ、攻撃対象のサイトへの攻撃などを行わせる
  - 被害  
  いたずら目的の書き込みをさせられる  
  Dos攻撃
  - 対策法  
  ユーザ側は攻撃用サイトへのリンクを踏まないように気を付ける  
  サーバ側はトークンなどの情報を照合して確認する

## 課題２（クイズ）

### Q1 twitterのレイバン乗っ取りの原因を答えよ

<details><summary>回答</summary><div>

パスワードリスト攻撃

</div></details>

### Q2 上記の対策法を答えよ

<details><summary>回答</summary><div>

同一IPからの大量のログイン試行を弾くようにする  
WAF(Web application firewall)を導入する

</div></details>

### Q3 マウス操作だけで設定を変更できるサイトの脆弱性を答えよ

<details><summary>回答</summary><div>

[クリックジャッキング](https://www.ipa.go.jp/security/vuln/websecurity-HTML-1_9.html)

</div></details>



## 課題３（実演）
### セットアップ
Damn Vulnerable Web Applicationを使いここまで学んだ脆弱性を、実際に試してみましょう！  
phpで書かれたWEBアプリケーションで、様々な脆弱性が意図的に埋め込まれています  
上記サイトの「Download」からアプリケーションをダウンロードして、readmeに沿って、起動してみましょう  
Dockerで環境構築する方法もおすすめです  


### 脆弱性の攻撃
DVWAに最低限、以下の攻撃を成功させてください
- コマンドインジェクション

フォームに以下を入力
```
127.0.0.1 && ls /
```

- SQLインジェクション

フォームに以下を入力
```
0' OR 1=1 OR user_id = '1
```

- CSRF

フォームに適当なパスワードを入力
生成されたURLを共有する（`http://localhost:3000/vulnerabilities/csrf/?password_new=aaaaa&password_conf=aaaaa&Change=Change#`）

- XSS(Reflected)

フォームに以下を入力
```
<script>alert('xss')</script>
```
生成されたURLを共有する（`http://localhost:3000/vulnerabilities/xss_r/?name=%3Cscript%3Ealert%28%27xss%27%29%3C%2Fscript%3E#`）

### それぞれの攻撃に対して有効な防御手段を説明して下さい

エスケープ処理を行う（課題１）